<?xml version="1.0" ?>
<Simulation verbosity="all">
  <RunInfo>
    <WorkingDir>PhysicsGuidedCoverageMapping_snapshot</WorkingDir>
    <Sequence>load,PCM</Sequence>
    <batchSize>1</batchSize>
  </RunInfo>

  <TestInfo>
    <name>framework/PostProcessors/Validation/test_validation_gate_pcm_SETH</name>
    <author>syin</author>
    <created>2022-10-05</created>
    <classesTested>PostProcessors.Validation.PhysicsGuidedCoverageMapping_snapshot</classesTested>
    <description>
        This test is aimed to show how snapshot_PCM works.
        This test is using SETH-C and SETH-D data 
        as experiment (Feature) and application (Target) models.
        Here, three timesteps' samples from SETH-C are used as experiemnt responses (Features),
        one timestep's samples from SETH-D are used as application responses (Target)
        The output is a fraction value reflecting the uncertainty reduction fraction 
        using Feature to validate Target comparing to the Target prior.
        The output is an array of uncertainty reduction along timesteps 
        which has two columns:'time' and 'pri_post_stdReduct'.
    </description>
    <revisions>
      <revision author="syin" date="2022-10-06">...</revision>
    </revisions>
  </TestInfo>

  <Files>
    <Input name="allData">./data/Temp/TSimpleGap.csv</Input>
  </Files>

  <Models>
    <PostProcessor name="pcm_snapshot" subType="PhysicsGuidedCoverageMapping_snapshot">
      <pivotParameter>time</pivotParameter>
      <Features>exp|TempC</Features>
      <Targets>app|TempD</Targets>
      <Measurements>msr|TempMsrC</Measurements>
    </PostProcessor>
  </Models>

  <Steps>
    <IOStep name="load">
      <Input class="Files" type="">allData</Input>
      <Input class="Files" type="">allData</Input>
      <Input class="Files" type="">allData</Input>
      <Output class="DataObjects" type="HistorySet">exp</Output>
      <Output class="DataObjects" type="HistorySet">app</Output>
      <Output class="DataObjects" type="HistorySet">msr</Output>
    </IOStep>
    <PostProcess name="PCM">
      <Input class="DataObjects" type="HistorySet">exp</Input>
      <Input class="DataObjects" type="HistorySet">app</Input>
      <Input class="DataObjects" type="HistorySet">msr</Input>
      <Model class="Models" type="PostProcessor">pcm_snapshot</Model>
      <Output class="DataObjects" type="HistorySet">pcmSS_metric</Output>
      <Output class="OutStreams" type="Print">pcmSS_metric_dump</Output>
    </PostProcess>
  </Steps>

  <DataObjects>
    <HistorySet name="exp">
      <options>
       <pivotParameter>time</pivotParameter> 
      </options>
      <Output>TempC</Output>     
    </HistorySet>
    <HistorySet name="app">
      <options>
        <pivotParameter>time</pivotParameter> 
      </options>
      <Output>TempD</Output>     
    </HistorySet>      
    <HistorySet name="msr">
      <options>
        <pivotParameter>time</pivotParameter> 
      </options>
      <Output>TempMsrC</Output>     
    </HistorySet>    
    <HistorySet name="pcmSS_metric">
      <Input>InputPlaceHolder</Input>
      <options>
        <pivotParameter>time</pivotParameter> 
      </options>
      <Output>pri_post_stdReduct</Output>
    </HistorySet>
  </DataObjects>

  <OutStreams>       
    <Print name="pcmSS_metric_dump">
      <type>csv</type>
      <source>pcmSS_metric</source>
    </Print>
  </OutStreams>

</Simulation>
